<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Student Profile | AI Internship Engine</title>
  <style>
    /* ===== Reset ===== */
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif; }
    body { background: linear-gradient(135deg,#9c27b0,#2196f3); color:#333; display:flex; flex-direction:column; min-height:100vh; }

    /* ===== Navbar ===== */
    nav { background: linear-gradient(90deg,#1a73e8,#0d47a1); color:white; display:flex; justify-content:space-between; align-items:center; padding:15px 50px; position:sticky; top:0; z-index:1000; box-shadow:0 4px 10px rgba(0,0,0,0.2); }
    .logo { display:flex; align-items:center; gap:12px; }
    .logo img { height:42px; width:42px; border-radius:50%; border:2px solid #ffcc00; }
    .logo h1 { font-size:20px; font-weight:bold; letter-spacing:1px; }
    nav ul { list-style:none; display:flex; gap:25px; }
    nav ul li { position:relative; }
    nav ul li a { text-decoration:none; color:white; font-weight:500; padding:6px 8px; display:flex; align-items:center; gap:6px; transition:color 0.3s; }
    nav ul li a img { width:18px; height:18px; }
    nav ul li a::after { content:""; position:absolute; left:0; bottom:-4px; width:0%; height:2px; background:#ffcc00; transition:width 0.3s ease; }
    nav ul li a:hover::after { width:100%; }
    nav ul li a:hover { color:#ffcc00; }
    nav ul li a.active { color:#ffcc00; font-weight:bold; }

    /* ===== Form Container ===== */
    .form-container { max-width:950px; margin:40px auto; background:rgba(255,255,255,0.9); border-radius:20px; box-shadow:0 8px 25px rgba(0,0,0,0.25); padding:40px; animation:fadeIn 1.2s ease-in-out; backdrop-filter:blur(10px); }
    .form-container h2 { text-align:center; margin-bottom:30px; font-size:30px; font-weight:bold; background:linear-gradient(90deg,#2196f3,#9c27b0); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }

    /* ===== Section Headings ===== */
    .form-section { margin-bottom:30px; padding-bottom:15px; border-bottom:1px dashed #ccc; }
    .form-section h3 { font-size:20px; color:#0d47a1; margin-bottom:15px; display:flex; align-items:center; gap:8px; }
    .form-section h3::before { content:"üìå"; }

    /* ===== Input Grid ===== */
    .form-group { display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:20px; margin-bottom:15px; }
    label { font-weight:600; margin-bottom:6px; display:block; color:#444; }
    input, select, textarea { width:100%; padding:12px; border:1px solid #ccc; border-radius:10px; font-size:14px; transition:all 0.3s; }
    input:focus, select:focus, textarea:focus { border-color:#2196f3; box-shadow:0 0 8px rgba(33,150,243,0.3); outline:none; transform:scale(1.02); }
    textarea { resize:none; min-height:80px; }

    /* ===== Submit Button ===== */
    .submit-btn { background:linear-gradient(90deg,#2196f3,#9c27b0); color:white; padding:14px 30px; border:none; border-radius:30px; cursor:pointer; font-size:16px; font-weight:bold; transition:all 0.3s ease; display:block; margin:auto; }
    .submit-btn:hover { transform:scale(1.05); box-shadow:0 6px 18px rgba(0,0,0,0.25); opacity:0.95; }

    /* ===== Footer ===== */
    footer { background:#1a73e8; color:white; text-align:center; padding:20px; margin-top:auto; }

    /* Animation */
    @keyframes fadeIn { from {opacity:0; transform: translateY(20px);} to {opacity:1; transform: translateY(0);} }
  </style>
</head>
<body>

  <!-- Navbar -->
  <nav>
    <div class="logo">
      <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Logo">
      <h1>Internship Recommendation</h1>
    </div>
    <ul>
      <li><a href="index.html"><img src="https://cdn-icons-png.flaticon.com/512/25/25694.png" alt="Home"> Home</a></li>
      <li><a href="studentprofile.html" class="active"><img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Profile"> Profile</a></li>
      <li><a href="top5.html"><img src="https://cdn-icons-png.flaticon.com/512/1828/1828961.png" alt="Top Internships"> Top Internships</a></li>
      <li><a href="feedback.html"><img src="https://cdn-icons-png.flaticon.com/512/134/134914.png" alt="Feedback"> Feedback</a></li>
      <li><a href="about.html"><img src="https://cdn-icons-png.flaticon.com/512/1828/1828859.png" alt="About"> About</a></li>
    </ul>
  </nav>

  <!-- Student Profile Form -->
  <div class="form-container">
    <h2>üéì Student Information Form</h2>
    <form id="studentForm" enctype="multipart/form-data">

      <!-- Basic Details -->
      <div class="form-section">
        <h3>Basic Details</h3>
        <div class="form-group">
          <div><label>Full Name</label><input type="text" name="fullname" required></div>
          <div><label>Email / Student ID</label><input type="email" name="email" required></div>
          <div><label>Contact Number</label><input type="tel" name="phone" pattern="[0-9]{10}"></div>
          <div><label>Gender</label>
            <select name="gender" required>
              <option disabled selected>Select</option>
              <option>Male</option><option>Female</option><option>Other</option>
            </select>
          </div>
          <div><label>Date of Birth</label><input type="date" name="dob"></div>
        </div>
      </div>

      <!-- Academic Info -->
      <div class="form-section">
        <h3>Academic Information</h3>
        <div class="form-group">
          <div><label>College / University</label><input type="text" name="college" required></div>
          <div><label>Degree</label><input type="text" name="degree"></div>
          <div><label>Branch / Specialization</label><input type="text" name="branch"></div>
          <div><label>Year / Semester</label><input type="text" name="year"></div>
          <div><label>CGPA / Percentage</label><input type="text" name="cgpa"></div>
        </div>
      </div>

      <!-- Skills -->
      <div class="form-section">
        <h3>Skills & Interests</h3>
        <div class="form-group">
          <div><label>Technical Skills</label><input type="text" name="techskills"></div>
          <div><label>Soft Skills</label><input type="text" name="softskills"></div>
          <div><label>Areas of Interest</label><input type="text" name="interest"></div>
        </div>
      </div>

      <!-- Preferences -->
      <div class="form-section">
        <h3>Internship Preferences</h3>
        <div class="form-group">
          <div><label>Domain Preference</label><input type="text" name="domain"></div>
          <div><label>Location Preference</label><input type="text" name="location"></div>
          <div><label>Duration</label>
            <select name="duration">
              <option disabled selected>Select</option>
              <option>1 Month</option><option>3 Months</option><option>6 Months</option>
            </select>
          </div>
          <div><label>Paid / Unpaid</label>
            <select name="paid">
              <option disabled selected>Select</option>
              <option>Paid</option><option>Unpaid</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Experience -->
      <div class="form-section">
        <h3>Past Experience</h3>
        <div class="form-group">
          <div><label>Internships / Projects</label><textarea name="projects"></textarea></div>
          <div><label>Certifications / Courses</label><textarea name="certs"></textarea></div>
          <div><label>Achievements</label><textarea name="achievements"></textarea></div>
        </div>
      </div>

      <!-- Upload Resume -->
      <div class="form-section">
        <h3>Upload Resume</h3>
        <div class="form-group">
          <div><label>Select Resume (PDF/DOC)</label><input type="file" name="resume" accept=".pdf,.doc,.docx"></div>
        </div>
      </div>

      <!-- Submit -->
      <button type="submit" class="submit-btn">üöÄ Submit Profile</button>
    </form>
  </div>

  <!-- Footer -->
  <footer>
    <p>¬© 2025 AI-Based Internship Recommendation Engine | PM Internship Scheme</p>
  </footer>

<!-- <script>
  // üîí Login check
  const token = localStorage.getItem("token");
  if(!token){
    alert("Please login first!");
    window.location.href = "login.html";
  }

  // üì§ Form submit
  document.getElementById("studentForm").addEventListener("submit", async function(e){
    e.preventDefault();
    const formData = new FormData(this);

    try {
      const res = await fetch("http://localhost:5000/api/studentprofile", {
        method: "POST",
        headers: { "Authorization": "Bearer " + token },
        body: formData
      });

      const result = await res.json();
      if(res.ok){
        alert("Profile saved successfully!");
        window.location.href = "top5.html";
      } else {
        alert(result.message || "Failed to save profile.");
      }
    } catch(err){
      console.error(err);
      alert("Error submitting profile. Try again.");
    }
  });
</script> -->
<script>
  // Token check
  const token = localStorage.getItem("token");
  if (!token) {
    alert("Please login first!");
    window.location.href = "login.html";
  }

  // Form submit
  document.getElementById("studentForm").addEventListener("submit", async function(e) {
    e.preventDefault();

    const formData = new FormData(this); // form ke sare inputs + file collect karega

    try {
      const res = await fetch("http://localhost:5000/api/studentprofile", {
        method: "POST",
        headers: {
          "Authorization": `Bearer ${token}`
          // ‚ùå "Content-Type" mat set karna, FormData khud set karega boundary ke sath
        },
        body: formData
      });

      const result = await res.json();
      console.log("Profile API Response:", result);

      if (res.ok && result.success) {
        alert("Profile saved successfully!");
        window.location.replace( "top5.html");
      } else {
        alert("Error: " + (result.message || "Unknown error"));
      }

    } catch (err) {
      console.error("Frontend Error:", err);
      alert("Error submitting profile. Try again.");
    }
  });
</script>

</body>
</html>
